<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>system design step guide | Jojo&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="Step 1: Requirements clarifications Ask questions about the exact scope of the problem we are solving clarify the ambiguities early should clarify what parts of the system we will be focusing on Examp">
<meta property="og:type" content="article">
<meta property="og:title" content="System Design Step Guide">
<meta property="og:url" content="https://jojoyang666.github.io/2020/09/22/System-Design-Step-Guide/index.html">
<meta property="og:site_name" content="Jojo&#39;s Blog">
<meta property="og:description" content="Step 1: Requirements clarifications Ask questions about the exact scope of the problem we are solving clarify the ambiguities early should clarify what parts of the system we will be focusing on Examp">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jojoyang666.github.io/images/twitter_high_level.png">
<meta property="article:published_time" content="2020-09-22T15:34:59.000Z">
<meta property="article:modified_time" content="2020-09-22T16:51:43.607Z">
<meta property="article:author" content="Jojo Yang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jojoyang666.github.io/images/twitter_high_level.png">
  
    <link rel="alternate" href="/atom.xml" title="Jojo&#39;s Blog" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt; src:url("/css/fonts/FuturaPTBold.otf") format("woff");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt-light; src:url("/css/fonts/FuturaPTBook.otf") format("woff");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt-italic; src:url("/css/fonts/FuturaPTBookOblique.otf") format("woff");font-weight:400;font-style:italic;}
}

  </style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

<meta name="generator" content="Hexo 4.2.1"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">Categories</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-System-Design-Step-Guide" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      System Design Step Guide
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2020/09/22/System-Design-Step-Guide/" class="article-date">
	  <time datetime="2020-09-22T15:34:59.000Z" itemprop="datePublished">2020-09-22</time>
	</a>

      
    <a class="article-category-link" href="/categories/System-Design/">System Design</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Step-1-Requirements-clarifications"><a href="#Step-1-Requirements-clarifications" class="headerlink" title="Step 1: Requirements clarifications"></a>Step 1: Requirements clarifications</h1><ol>
<li>Ask questions about the exact scope of the problem we are solving</li>
<li>clarify the ambiguities early</li>
<li>should clarify what parts of the system we will be focusing on</li>
<li>Example of Twitter should be answered:<ul>
<li>will users of our service be able to post tweets and follow other people?</li>
<li>should we also design to create and display the user’s timeline</li>
<li>will tweets contain photos and videos</li>
<li>are we focusing on the backend only or are we developing the front end too?</li>
<li>will users be able to search tweets</li>
<li>do we need to display hot trending topics</li>
<li>will there be any push notification for new (or important) tweets</li>
</ul>
</li>
</ol>
<h1 id="Step-2-Back-of-the-envelope-estimation"><a href="#Step-2-Back-of-the-envelope-estimation" class="headerlink" title="Step 2: Back-of-the-envelope estimation"></a>Step 2: Back-of-the-envelope estimation</h1><ol>
<li>estimate the scale of the system we’re going to design</li>
<li>help later when we will be focusing on scaling, partitioning, load balancing and caching</li>
<li>Common questions:<ul>
<li>what <strong>scale</strong> is expected from the system(e.g., number of new tweets, number of tweets views, number of timeline generations per sec., etc.)</li>
<li>How much <strong>storage</strong> will we need? we will have different storage requirements if users can have photos and videos in their tweets</li>
<li>what <strong>networkd bandwidth usage</strong> are we expecting? This will be crucial in deciding how we will manage <strong>traffic and balace load between servers</strong></li>
</ul>
</li>
</ol>
<h1 id="Step-3-System-interface-definition"><a href="#Step-3-System-interface-definition" class="headerlink" title="Step 3: System interface definition"></a>Step 3: System interface definition</h1><ol>
<li>Define what APIs are expected from the system</li>
<li>establish the exact contract expected from the system</li>
<li>Ensure if we have not gotten any requirements wrong<br><code>postTweet(user_id, tweet_data, tweet_location, user_location, timestamp, …)</code><br><code>generateTimeline(user_id, current_time, user_location, …)</code><br><code>markTweetFavorite(user_id, tweet_id, timestamp, …)</code></li>
</ol>
<h1 id="Step-4-Defining-Data-Model"><a href="#Step-4-Defining-Data-Model" class="headerlink" title="Step 4 Defining Data Model"></a>Step 4 Defining Data Model</h1><ol>
<li>claify how data will flow between different components of the system</li>
<li>it will guide for <strong>data partitioning and management</strong></li>
<li>how they will <strong>intract</strong> with each other, and different aspects of data management like <strong>storage, transportation, encryption, etc</strong>.</li>
<li>Example<ul>
<li>User: UserID, Name, Email, DoB, CreationData, LastLogin, etc.</li>
<li>Tweet: TweetID, Content, TweetLocation, NumberOfLikes, TimeStamp, etc.</li>
<li>UserFollow: UserID1, UserID2</li>
<li>FavoriteTweets: UserID, TweetID, TimeStamp</li>
</ul>
</li>
<li>Which Database should we use?<ul>
<li>NoSql like cassandra</li>
<li>MySQL-like solution</li>
<li>what kind of block should we use to store photos and videos</li>
</ul>
</li>
</ol>
<h1 id="Step-5-High-level-design"><a href="#Step-5-High-level-design" class="headerlink" title="Step 5: High-level design"></a>Step 5: High-level design</h1><ol>
<li>Block diagram with 5-6 boxes represeting the core components of our system</li>
<li>enough components that are needed to solve the actual problem from end-to-end</li>
<li>For twitter:<ul>
<li>need multiple application servers to serve all the read/write requests with load balancers in front of them for traffice distributions</li>
<li>if we are assuming that we will have a lot more read traffic(compared to write), we can decide to have seperate servers for handling these scenarios</li>
<li>On the backend, need efficient database that can store all the tweets and can support a huge number reads</li>
<li>a ditributed file storage system for storing photos and videos<br><img src="/images/twitter_high_level.png" alt="twitter_high_level"></li>
</ul>
</li>
</ol>
<h1 id="Step-6-Detailed-design"><a href="#Step-6-Detailed-design" class="headerlink" title="Step 6: Detailed design"></a>Step 6: Detailed design</h1><ol>
<li>Dig deeper into 2/3 major components</li>
<li>Interviwer’s feedback should always guide us to what parts of the system need further discussion</li>
<li>be able to present different approaces, their cons and pros, and explain why we prefer one approach on the other</li>
<li>there is no single answer, the only important thing is to condider tradeoffs between different options while keeping system contraints in mind</li>
<li>Example<ul>
<li>Since we will be storing a massive amount of data, how should we partition our data to distribute it to multiple database?</li>
<li>should we try to store all the data of a user on the same database? what issue could it cause?</li>
<li>Since users’ timeline will contain the most recent (and relevsnt) tweets, should we try to store our data in such a way that is optimized for scanning the latest tweets</li>
<li>how much and at which layer should we introduce cache to speed things up?</li>
<li>what components need better load balancing</li>
</ul>
</li>
</ol>
<h1 id="Step-7-Identifying-and-resolving-bottlenecks"><a href="#Step-7-Identifying-and-resolving-bottlenecks" class="headerlink" title="Step 7: Identifying and resolving bottlenecks"></a>Step 7: Identifying and resolving bottlenecks</h1><ol>
<li>Discuss as many bottlenecks as possible and different approaches to mitigate them</li>
<li>Example<ul>
<li>Is there any single point of failure in our system? what are we doing to mitigate it?</li>
<li>Do we have enough replicas of the data so that if we lose a few servers, we can still serve our users</li>
<li>Do we have enough copies of different services running such that a few failures will not cause total system shutdown</li>
<li>how are we monitoring the performace of our service? do we get alerts whenever critical fail or their performance degrades</li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>


<script src="/js/vdonate.js"></script>

<script>
var a = new Donate({
  title: 'If you think my post is working for you, please donate to support me continue working', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'https://raw.githubusercontent.com/iTimeTraveler/iTimeTraveler.github.io/site/source/about/donate/images/WeChanQR.png',
  alipayImage: 'https://raw.githubusercontent.com/iTimeTraveler/iTimeTraveler.github.io/site/source/about/donate/images/AliPayQR.jpg'
});
</script>
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>Post author:  </strong>Jojo Yang</a>
          </li>
          <li class="post-copyright-link">
          <strong>Post link:  </strong>
          <a href="/2020/09/22/System-Design-Step-Guide/" target="_blank" title="System Design Step Guide">https://jojoyang666.github.io/2020/09/22/System-Design-Step-Guide/</a>
          </li>
          <li class="post-copyright-license">
            <strong>Copyright Notice:   </strong>
            All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            unless stating additionally.
          </li>
         
        </ul>
<div>

      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      
        
      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/22/RectDom/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          RectDom
        
      </div>
    </a>
  
  
    <a href="/2020/09/22/318-Maximum-Product-of-Word-Lengths/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">318. Maximum Product of Word Lengths</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-1-Requirements-clarifications"><span class="nav-number">1.</span> <span class="nav-text">Step 1: Requirements clarifications</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-2-Back-of-the-envelope-estimation"><span class="nav-number">2.</span> <span class="nav-text">Step 2: Back-of-the-envelope estimation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-3-System-interface-definition"><span class="nav-number">3.</span> <span class="nav-text">Step 3: System interface definition</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-4-Defining-Data-Model"><span class="nav-number">4.</span> <span class="nav-text">Step 4 Defining Data Model</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-5-High-level-design"><span class="nav-number">5.</span> <span class="nav-text">Step 5: High-level design</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-6-Detailed-design"><span class="nav-number">6.</span> <span class="nav-text">Step 6: Detailed design</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Step-7-Identifying-and-resolving-bottlenecks"><span class="nav-number">7.</span> <span class="nav-text">Step 7: Identifying and resolving bottlenecks</span></a></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2020 Jojo&#39;s Blog All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>









	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">Setting</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              Front Size
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            You already change font size
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              Night eye protection mode
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            Night eye protection mode has turned on, click again to turn off
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Jojo&#39;s Blog
          </div>
          <div class="panel-body">
            Copyright © 2020 Jojo Yang All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>